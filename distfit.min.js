var arithMean=exports.arithMean=function(a){var b,c=0,d=a.length;for(b=0;d>b;b++)c+=a[b];return c/d},sampleStdDev=exports.sampleStdDev=function(a){var b,c=a.length,d=arithMean(a),e=0;for(b=0;c>b;b++)e+=Math.pow(a[b]-d,2);return Math.sqrt(e/(c-1))},factorial=exports.factorial=function(a){var b,c=1;for(b=2;a>=b;b++)c*=b;return c},Distribution=exports.Distribution=function(a,b){this.mean=a,this.variance=b};Distribution.prototype.isUniquelyDetermined=function(){},Distribution.prototype.fitData=function(){};var ContinuousDistribution=exports.ContinuousDistribution=function(a,b){Distribution.call(this),this.mean=a,this.variance=b};Distribution.prototype.cdf=function(){},ContinuousDistribution.prototype.pdf=function(){};var DiscreteDistribution=exports.DiscreteDistribution=function(a,b){Distribution.call(this),this.mean=a,this.variance=b};DiscreteDistribution.prototype.pmf=function(){};var erf=exports.erf=function(a){var b=.254829592,c=-.284496736,d=1.421413741,e=-1.453152027,f=1.061405429,g=.3275911,h=1;0>a&&(h=-1),a=Math.abs(a);var i=1/(1+g*a),j=1-((((f*i+e)*i+d)*i+c)*i+b)*i*Math.exp(-a*a);return h*j},Normal=module.exports.Normal=require("./normal").Normal,Poisson=module.exports.Poisson=require("./poisson").Poisson,Exponential=module.exports.Exponential=require("./exponential").Exponential,KDE=module.exports.KDE=require("./kde"),core=require("./core"),Exponential=exports.Exponential=function(a){this.lambda=a,this.mean=this.variance=void 0,void 0!==a&&this.setLambda(a)};Exponential.prototype=Object.create(core.ContinuousDistribution.prototype),Exponential.prototype.constructor=Exponential,Exponential.computeLambdaUMVUE=exports.Exponential.computeLambdaUMVUE=function(a){var b=core.arithMean(a),c=a.length,d=(c-1)/c*Math.pow(b,-1);return d},Exponential.computeLambdaMinMSE=exports.computeLambdaMinMSE=function(a){var b=core.arithMean(a),c=a.length,d=(c-2)/c*Math.pow(b,-1);return d},Exponential.prototype.fitData=function(a){core.ContinuousDistribution.call(this);var b=Exponential.computeLambdaUMVUE(a);this.setLambda(b)},Exponential.prototype.setLambda=function(a){this.lambda=a,this.mean=Math.pow(a,-1),this.variance=Math.pow(a,-2)},Exponential.prototype.isUniquelyDetermined=function(){return void 0!==this.lambda&&0!==this.lambda},Exponential.prototype.pdf=function(a){return this.lambda*Math.exp(-this.lambda*a)},Exponential.prototype.cdf=function(a){return 1-Math.exp(-this.lambda*a)};var core=require("./core"),Kernel=exports.Kernel=function(){};Kernel.Gaussian=exports.Kernel.Gaussian=function(a){return 1/Math.sqrt(2*Math.PI)*Math.exp(-0.5*Math.pow(a,2))};var KDEDist=exports.KDEDist=function(a,b){this.kernel=a,this.data=b,this.fitData(b)};KDEDist.prototype=Object.create(core.Distribution.prototype),KDEDist.prototype.constructor=KDEDist,KDEDist.silverman=function(a,b){return Math.pow(4*Math.pow(a,5)/(3*b),.2)},KDEDist.prototype.fitData=function(a){this.n=a.length,this.data=a,this.sigmahat=core.sampleStdDev(a),this.bw=KDEDist.silverman(this.sigmahat,this.n)},KDEDist.prototype.pdf=function(a){var b=0,c=this.kernel,d=this.bw;return this.data.forEach(function(e){var f=(a-e)/d;b+=c(f)}),Math.pow(this.n*this.bw,-1)*b};var core=require("./core"),Normal=exports.Normal=function(a,b){this.mu=a,this.sigma2=b,this.mean=this.mu,this.variance=this.sigma2};Normal.prototype=Object.create(core.ContinuousDistribution.prototype),Normal.prototype.constructor=Normal,Normal.computeMu=exports.Normal.computeMu=function(a){return core.arithMean(a)},Normal.computeSigma2=exports.Normal.computeSigma2=function(a,b){b=b||Normal.computeMu(a);var c,d=0,e=a.length;for(c=0;e>c;c++){var f=Math.pow(a[c]-b,2);d+=f}var g=d/e;return g},Normal.prototype.fitData=function(a){core.ContinuousDistribution.call(this),this.mu=Normal.computeMu(a),this.sigma2=Normal.computeSigma2(a,this.mu),this.mean=this.mu,this.variance=this.sigma2},Normal.prototype.isUniquelyDetermined=function(){var a=void 0!==this.mu,b=void 0!==this.sigma2&&this.sigma2>0;return a&&b},Normal.prototype.pdf=function(a){var b=Math.sqrt(this.sigma2),c=Math.pow(b*Math.sqrt(2*Math.PI),-1),d=-Math.pow(a-this.mu,2)/(2*this.sigma2);return c*Math.exp(d)},Normal.prototype.cdf=function(a){var b=(a-this.mu)/Math.sqrt(this.sigma2),c=.5*(1+core.erf(b/Math.sqrt(2)));return c};var core=require("./core"),Poisson=exports.Poisson=function(a){this.lambda=a,this.mean=a,this.variance=a};Poisson.prototype=Object.create(core.DiscreteDistribution.prototype),Poisson.prototype.constructor=Poisson,Poisson.computeLambda=exports.Poisson.computeLambda=function(a){var b=core.arithMean(a);return b},Poisson.prototype.isUniquelyDetermined=function(){return void 0!==this.lambda},Poisson.prototype.fitData=function(a){core.DiscreteDistribution.call(this);var b=Poisson.computeLambda(a);this.lambda=this.mean=this.variance=b},Poisson.prototype.pmf=function(a){return Math.pow(this.lambda,a)*Math.exp(-this.lambda)/core.factorial(a)},Poisson.prototype.cdf=function(a){var b,c=0;for(b=0;a>=b;b++){var d=this.pmf(b);c+=d}return c};